# 锂电池双向充放电

> - :tipping_hand_man:  基本原理和波形的核对，所有的模块双击会有help，可以参考着学习

- 仿真文件

  ```shell
  ./Battery_charge_discharge_ChgDiscModeChange.slx   
  # latest 1.实现双向非隔离DCDC充放电（母线电压闭环方式）
  # 2.手动充放电切换逻辑 + 母线电压稳定
  
  ./Battery_charge_discharge_100ah_only2directionChrgDischarge.mdl  
  # 第一版：实现双向充电，无充放电切换逻辑
  
  ./OneDirection_battery_Charg_disCharg_from_DCSource_bidirectionalDCConv.slxc
  # rawVersion: 双向非隔离DCDC，只能满足网侧电压 > 电池电压的情况
  ```

- **需求描述 :necktie:**

  > - 电池组参数信息参考
  >   [LFP-100Ah（8S）捆扎模组产品 参考](https://epropulsion.feishu.cn/file/boxcnnuTOKmcj1f6dT2SQ5Kt2rf)
  >   [G102-100 电池文档参考](https://epropulsion.feishu.cn/docx/doxcndgpk2qpBiJfda1Sn7ms5Cc)

  - 基本功能

    现在是微电网项目里面锂电池的一个模块，想要实现 **90kwh（电量，不固定） 的锂电池组模块（100Ah 容量, 102.4V 电压变化范围85-112V， 具体信息参考下面的文档）**，通过**并联多个双向非隔离 dcdc 连到母线（96V）**实现双向充放电的功能。

    - 100Ah 102.4V 锂电池组，组合成 90kwh电池组（目前视为一个整体，组合的话仿真太慢跑不动），这个锂电池组是船上一个动力锂电池。
      96V/3.2== 30 串，
      - 整体电池组 SOC 估计
    - 多个双向非隔离 dcdc：母线电压96V，电池电压85-115v 需要那种双向 boostbuck即能升又能降得那种，就是电池电压过低 < 96V 时候，需要母线给电池充电要升压。

    

## 充放电的逻辑

> 目前实现了：1.双向充放电；2. 母线电压稳定+超调<1%；3. 满足电池组电压范围 85-112V的充放电

- 连接方式
  100AH 102.4V的电池模块（用的matlab官方模块）接入一个双向非隔离DCDC连接到母线（仿真里面我视为电压源加上一个负载）

- 充放电逻辑
  根据直流母线的电压来决定电池的充放电
  - 直流母线电压 < 96V，电池组给母线充电，满足1）母线电压稳定在96V；2）母线电压的超调<1% （增加了电压源旁边负载电阻的阻值）；3） 输出的电池恒流：保持电流稳定在20A（符合在0-30A了）同时电池因为放电 SOC下降；
  - 母线电压 > 96V ，给电池充电，此时不考虑母线电压的稳定了，就只看电池的电流是否为恒流，此时电流反向为 -5A 给电池充电，电池SOC上升

### 仿真测试

- 验证
  - 双向DC/DC的电流环充放电**恒流模式**
  - 调节**输出电压的电压模式**的功能



## 后续优化

该部分锂电池模块，目前实现了基本充放电需求。待连入整体微电网结构，进一步测试充放电控制策略。

